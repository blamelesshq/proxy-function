AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'prometheus-lambda

  Sample SAM Template for prometheus-lambda

  '
Globals:
  Function:
    Timeout: 25
Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: HelloWorldFunction
      Handler: hello-world
      Runtime: go1.x
      Architectures:
      - x86_64
      Tracing: Active
      Events:
        GetResource:
          Type: Api
          Properties:
            Path: /{proxy+}
            Method: any
      Environment:
        Variables:
          PARAM1: VALUE
          PrometheusURL: http://promdatagen.6a822d79f4cf49bbb34f.westus.aksapp.io/
          PROMETHEUS_URL: http://promdatagen.6a822d79f4cf49bbb34f.westus.aksapp.io/
          RESTO_URL: null
          PROMETHEUS_LOGIN: AQICAHgfRxglKrVjDNVZT9L5wvzka/MCMLcxBjVAJn7F6VeN9QF95AOx5duBhP2M7Oj/fwj/AAAAYjBgBgkqhkiG9w0BBwagUzBRAgEAMEwGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQM4pm/U1Q7kPtSWm8DAgEQgB8BlvMXLO8h/O7ZuOgqfxZceS+uoIzAFoRmg+eHt7Z9
          PROMETHEUS_PASSWORD: AQICAHgfRxglKrVjDNVZT9L5wvzka/MCMLcxBjVAJn7F6VeN9QHt/mT77KBwtd2OC0bYycdDAAAAYjBgBgkqhkiG9w0BBwagUzBRAgEAMEwGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMVWNokO2UVpIvJby7AgEQgB8Ja3gi1m9gOV9LOsDEzd9oVga6HBjjK6duBsH+x3up
          RESTO_AUTH_TOKEN: null
          IS_GCP: null
          RouteConfig: '{"functions":[{"route":"/api/fetch","url":"http://104.211.56.83:8089","accessToken":"string_token","type":"Splunk"},{"route":"/api/fetch3","url":"http://104.211.56.83:8089","accessToken":"string_token","type":"Splunk"},{"route":"/api/fetch4","url":"http://104.211.56.83:8089","accessToken":"string_token","type":"Splunk"},{"route":"/api/prometheus-5","url":"/api/fetch5","login":"","password":"","type":"Prometheus"}]}'
    Metadata:
      SamResourceId: HelloWorldFunction
Outputs:
  HelloWorldAPI:
    Description: API Gateway endpoint URL for Prod environment for First Function
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/
  HelloWorldFunction:
    Description: First Lambda Function ARN
    Value:
      Fn::GetAtt:
      - HelloWorldFunction
      - Arn
  HelloWorldFunctionIamRole:
    Description: Implicit IAM Role created for Hello World function
    Value:
      Fn::GetAtt:
      - HelloWorldFunctionRole
      - Arn
  SampleGinApi:
    Description: URL for application
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/pets
    Export:
      Name: SampleGinApi
